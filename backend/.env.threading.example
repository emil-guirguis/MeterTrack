# Environment Configuration for Threading Architecture
# Copy this file to .env and update the values

# Application Environment
NODE_ENV=production
PORT=3001

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/mcp-data
MONGODB_DBNAME=mcp-data
MONGO_ROOT_PASSWORD=admin123

# Security
JWT_SECRET=your-super-secret-jwt-key-change-in-production-minimum-32-characters
FRONTEND_URL=http://localhost:5173,http://localhost:3000

# Threading System Configuration
THREADING_AUTO_START=true
WORKER_MAX_MEMORY_MB=512
WORKER_LOG_LEVEL=info

# Modbus Configuration
MODBUS_HOST=localhost
MODBUS_PORT=502
MODBUS_TIMEOUT=5000
MODBUS_RETRY_ATTEMPTS=3
MODBUS_RETRY_DELAY=1000
MODBUS_UNIT_ID=1
MODBUS_REGISTER_START=0
MODBUS_REGISTER_COUNT=10
MODBUS_COLLECTION_INTERVAL=5000

# Database Pool Configuration
DB_POOL_SIZE=10
DB_TIMEOUT=10000
DB_RETRY_ATTEMPTS=3
DB_BATCH_SIZE=100
DB_FLUSH_INTERVAL=5000

# Health Monitoring Configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
MAX_MISSED_HEALTH_CHECKS=3
MEMORY_THRESHOLD_MB=400

# Restart Management Configuration
MAX_RESTART_ATTEMPTS=5
RESTART_DELAY=1000
MAX_RESTART_DELAY=60000
BACKOFF_MULTIPLIER=2
RESET_COUNTER_AFTER=300000

# Error Handling Configuration
MAX_ERROR_HISTORY=1000
ERROR_REPORTING_INTERVAL=60000
ENABLE_ERROR_AGGREGATION=true

# Message Queue Configuration
MESSAGE_QUEUE_MAX_SIZE=1000
MESSAGE_QUEUE_BACKPRESSURE_THRESHOLD=0.8
MESSAGE_PROCESSING_DELAY=10
MESSAGE_BATCH_SIZE=5

# Resource Management Configuration
ENABLE_MEMORY_MONITORING=true
ENABLE_RESOURCE_CLEANUP=true
RESOURCE_CLEANUP_INTERVAL=60000
MAX_RESOURCE_AGE=3600000
MAX_IDLE_TIME=300000

# Logging Configuration
LOG_LEVEL=info
ENABLE_FILE_LOGGING=true
LOG_ROTATION_MAX_SIZE=10m
LOG_ROTATION_MAX_FILES=5

# Monitoring Configuration
ENABLE_MONITORING=true
METRICS_RETENTION_DAYS=7
METRICS_COLLECTION_INTERVAL=10000
ENABLE_ALERTS=true
ALERT_CHECK_INTERVAL=30000

# Optional: Prometheus/Grafana
ENABLE_PROMETHEUS_EXPORT=false
PROMETHEUS_PORT=9090
GRAFANA_PASSWORD=admin123

# Optional: Redis for caching
REDIS_URL=redis://localhost:6379
ENABLE_REDIS_CACHING=false
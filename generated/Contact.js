// @ts-nocheck
/**
 * Contact Model for PostgreSQL
 * Extends BaseModel for automatic CRUD generation
 * 
 * Generated from database schema
 */

const BaseModel = require('../../../../framework/backend/api/base/BaseModel');
const db = require('../config/database');

class Contact extends BaseModel {
  constructor(contactData = {}) {
    super(contactData);
    
    // Field definitions only - CRUD methods are generated by BaseModel
    this.id = contactData.id;
    this.name = contactData.name;
    this.company = contactData.company;
    this.role = contactData.role;
    this.email = contactData.email;
    this.phone = contactData.phone;
    this.street = contactData.street;
    this.street2 = contactData.street2;
    this.city = contactData.city;
    this.state = contactData.state;
    this.zip = contactData.zip;
    this.country = contactData.country;
    this.active = contactData.active;
    this.notes = contactData.notes;
    this.created_at = contactData.created_at;
    this.updated_at = contactData.updated_at;
    this.tenant_id = contactData.tenant_id;
  }

  // ===== Static Configuration =====
  
  /**
   * Database table name
   */
  static get tableName() {
    return 'contact';
  }

  /**
   * Primary key field
   */
  static get primaryKey() {
    return 'id';
  }

  /**
   * Relationship definitions
   * TODO: Add relationships based on foreign keys
   */
  static get relationships() {
    return {
      // Example:
      // parentTable: {
      //   type: 'belongsTo',
      //   model: 'ParentModel',
      //   foreignKey: 'parent_id',
      //   targetKey: 'id'
      // }
    };
  }

  // ===== Custom Methods =====

  /**
   * Get contact statistics
   */
  static async getStats() {
    const query = `
      SELECT
        COUNT(*) as total_count
      FROM contact
    `;

    const result = await db.query(query);
    return result.rows[0];
  }

  /**
   * Convert to JSON
   */
  toJSON() {
    return {
      ...this
    };
  }
}

module.exports = Contact;

{"chunk":60,"count":120,"ip":"10.10.10.11","level":"info","message":"Modbus scan starting","port":502,"service":"modbus-mcp-agent","slaveId":1,"start":0,"timeout":5000,"timestamp":"2025-10-06T20:01:20.310Z"}
{"level":"info","message":"Scan: connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.320Z"}
{"length":120,"level":"info","message":"Scan: input registers read","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.327Z"}
{"length":120,"level":"info","message":"Scan: holding registers read","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.335Z"}
{"holding":{"first20":[2,0,1,1,13,2020,2509,2511,92,3,0,0,1997,32768,32768,3763,1,3763,7527,5],"nonZeroCount":22},"input":{"first20":[0,0,0,0,0,0,0,0,0,0,4066,13510,151,10756,1104,3318,0,0,0,0],"nonZeroCount":6},"level":"info","message":"Scan summary","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.336Z"}
{"level":"info","message":"Scan decode (input)","samples":[{"addrPair":"0-1","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"2-3","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"4-5","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"6-7","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"8-9","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"10-11","beFloat":2.2305648161203483e-29,"hi":4066,"leFloat":3.689193022182735e-7,"lo":13510,"u32":266482886},{"addrPair":"12-13","beFloat":1.388223228613895e-38,"hi":151,"leFloat":1.172415978320171e-13,"lo":10756,"u32":9906692},{"addrPair":"14-15","beFloat":2.4456233867733506e-36,"hi":1104,"leFloat":3.7904896797067417e-31,"lo":3318,"u32":72355062},{"addrPair":"16-17","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"18-19","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"20-21","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"22-23","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"24-25","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"26-27","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"28-29","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"30-31","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"32-33","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"34-35","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"36-37","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"38-39","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0}],"service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.337Z"}
{"level":"info","message":"Scan decode (holding)","samples":[{"addrPair":"0-1","beFloat":1.8367099231598242e-40,"hi":2,"leFloat":2.802596928649634e-45,"lo":0,"u32":131072},{"addrPair":"2-3","beFloat":9.183689745645554e-41,"hi":1,"leFloat":9.183689745645554e-41,"lo":1,"u32":65537},{"addrPair":"4-5","beFloat":1.1966920729518219e-39,"hi":13,"leFloat":3.430565698093389e-34,"lo":2020,"u32":853988},{"addrPair":"6-7","beFloat":4.936117878215703e-33,"hi":2509,"leFloat":4.9842653921414144e-33,"lo":2511,"u32":164432335},{"addrPair":"8-9","beFloat":8.448869850430584e-39,"hi":92,"leFloat":2.756354079326915e-40,"lo":3,"u32":6029315},{"addrPair":"10-11","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"12-13","beFloat":3.092020340402945e-34,"hi":1997,"leFloat":-2.7983930332566597e-42,"lo":32768,"u32":130908160},{"addrPair":"14-15","beFloat":-5.2730861212542866e-42,"hi":32768,"leFloat":4.425016640224113e-30,"lo":3763,"u32":-2147479885},{"addrPair":"16-17","beFloat":9.71085822792455e-41,"hi":1,"leFloat":4.412691064738227e-30,"lo":3763,"u32":69299},{"addrPair":"18-19","beFloat":3.057260553737949e-21,"hi":7527,"leFloat":4.6972505433092896e-40,"lo":5,"u32":493289477},{"addrPair":"20-21","beFloat":2.7566623649890666e-40,"hi":3,"leFloat":1.0469250765906391e-38,"lo":114,"u32":196722},{"addrPair":"22-23","beFloat":9.734642466759535e-39,"hi":106,"leFloat":5.2347718186427175e-39,"lo":57,"u32":6946873},{"addrPair":"24-25","beFloat":9.183549615799121e-41,"hi":1,"leFloat":1.401298464324817e-45,"lo":0,"u32":65536},{"addrPair":"26-27","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"28-29","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"30-31","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"32-33","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"34-35","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"36-37","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0},{"addrPair":"38-39","beFloat":0,"hi":0,"leFloat":0,"lo":0,"u32":0}],"service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.338Z"}
{"level":"info","message":"Scan: disconnected","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:01:20.340Z"}
{"device":"10.10.10.11:502","level":"info","message":"Modbus test starting","service":"modbus-mcp-agent","slaveId":1,"timeout":5000,"timestamp":"2025-10-06T20:05:20.121Z"}
{"ip":"10.10.10.11","level":"info","message":"Modbus settings","port":502,"service":"modbus-mcp-agent","slaveId":1,"timeout":5000,"timestamp":"2025-10-06T20:05:20.124Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:05:20.132Z"}
{"level":"info","message":"Modbus test: connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:05:20.132Z"}
{"level":"info","message":"Modbus test: connection test result","ok":true,"service":"modbus-mcp-agent","timestamp":"2025-10-06T20:05:20.137Z"}
{"current":0.01,"deviceIP":"10.10.10.11","energy":165087705,"frequency":9.2,"level":"info","message":"Modbus reading","meterId":"10.10.10.11_1","power":13,"powerFactor":0,"quality":"good","service":"modbus-mcp-agent","source":"modbus","timestamp":"2025-10-06T20:05:20.160Z","voltage":0.2}
{"level":"info","message":"Disconnected from Modbus device","service":"modbus-mcp-agent","timestamp":"2025-10-06T20:05:20.163Z"}
{"level":"info","message":"Initializing data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:25.579Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.204Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.355Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.360Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.360Z"}
{"level":"info","message":"Data collector initialized successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.361Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.382Z"}
{"level":"warn","message":"Data collection is not running","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.382Z"}
{"level":"info","message":"Disconnected from Modbus device","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.383Z"}
{"level":"error","message":"Failed to insert meter reading: MongoExpiredSessionError: Cannot use a session that has ended","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.385Z"}
{"errorLabelSet":{},"level":"error","message":"Failed to store meter reading: Cannot use a session that has ended","service":"modbus-mcp-agent","stack":"MongoExpiredSessionError: Cannot use a session that has ended\n    at applySession (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\sessions.js:748:16)\n    at Connection.prepareCommand (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\cmap\\connection.js:178:62)\n    at Connection.sendCommand (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\cmap\\connection.js:270:30)\n    at sendCommand.next (<anonymous>)\n    at Connection.command (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\cmap\\connection.js:334:26)\n    at Server.command (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\sdam\\server.js:194:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:213:32)\n    at async executeOperation (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:78:16)\n    at async Collection.insertOne (C:\\Projects\\facility-management-app\\mcp-modbus-agent\\node_modules\\mongodb\\lib\\collection.js:154:16)","timestamp":"2025-10-06T21:45:26.386Z"}
{"level":"info","message":"Disconnected from MongoDB","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.692Z"}
{"level":"info","message":"Data collector shutdown complete","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:45:26.692Z"}
{"level":"info","message":"Initializing data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:57.466Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.078Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.247Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.251Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.251Z"}
{"level":"info","message":"Data collector initialized successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.252Z"}
{"level":"info","message":"Data collection started with interval: 10000ms","service":"modbus-mcp-agent","timestamp":"2025-10-06T21:47:58.255Z"}
{"level":"info","message":"Initializing data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:47.719Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.332Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.490Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.494Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.494Z"}
{"level":"info","message":"Data collector initialized successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.495Z"}
{"level":"info","message":"Data collection started with interval: 10000ms","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:04:48.498Z"}
{"level":"info","message":"Initializing data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:14:32.551Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:14:33.216Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:14:33.381Z"}
{"level":"error","message":"Failed to connect to Modbus device: Error: connect ECONNREFUSED 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:14:35.424Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:30:51.784Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:33:58.562Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:33:58.718Z"}
{"level":"error","message":"Failed to connect to Modbus device: Error: connect ECONNREFUSED 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:34:00.770Z"}
{"level":"error","message":"Failed to connect to Modbus device: Error: connect ECONNREFUSED 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T22:35:37.897Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:17:21.118Z"}
{"device":"10.10.10.11:502","level":"info","message":"Modbus test starting","service":"modbus-mcp-agent","slaveId":1,"timeout":5000,"timestamp":"2025-10-06T23:43:15.944Z"}
{"ip":"10.10.10.11","level":"info","message":"Modbus settings","port":502,"service":"modbus-mcp-agent","slaveId":1,"timeout":5000,"timestamp":"2025-10-06T23:43:15.946Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:43:15.952Z"}
{"level":"info","message":"Modbus test: connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:43:15.953Z"}
{"level":"info","message":"Modbus test: connection test result","ok":true,"service":"modbus-mcp-agent","timestamp":"2025-10-06T23:43:15.958Z"}
{"current":0.01,"deviceIP":"10.10.10.11","energy":165743075,"frequency":5.8,"level":"info","message":"Modbus reading","meterId":"10.10.10.11_1","power":1,"powerFactor":0,"quality":"good","service":"modbus-mcp-agent","source":"modbus","timestamp":"2025-10-06T23:43:15.974Z","voltage":0.3}
{"level":"info","message":"Disconnected from Modbus device","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:43:15.976Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:14.882Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:15.038Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:15.085Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:15.086Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:16.174Z"}
{"level":"warn","message":"Data collection is not running","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:16.175Z"}
{"level":"info","message":"Disconnected from Modbus device","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:16.175Z"}
{"level":"info","message":"Disconnected from MongoDB","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:16.179Z"}
{"level":"info","message":"Data collector shutdown complete","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:46:16.179Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:36.416Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:36.597Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:36.644Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:36.644Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:37.727Z"}
{"level":"warn","message":"Data collection is not running","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:37.727Z"}
{"level":"info","message":"Disconnected from Modbus device","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:37.728Z"}
{"level":"info","message":"Disconnected from MongoDB","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:37.731Z"}
{"level":"info","message":"Data collector shutdown complete","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:49:37.731Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:13.886Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.087Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.137Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.138Z"}
{"level":"info","message":"Initializing data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.144Z"}
{"level":"info","message":"Connected to MongoDB: meterdb.meterreadings","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.144Z"}
{"level":"info","message":"Database indexes created successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.299Z"}
{"level":"info","message":"Connected to Modbus device at 10.10.10.11:502","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.303Z"}
{"level":"info","message":"Modbus client connected","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.304Z"}
{"level":"info","message":"Data collector initialized successfully","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.304Z"}
{"level":"info","message":"Data collection started with interval: 30000ms","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:50:14.309Z"}
{"level":"info","message":"Shutting down data collector...","service":"modbus-mcp-agent","timestamp":"2025-10-06T23:56:14.539Z"}

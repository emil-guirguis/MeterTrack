/* AppLayout Styles */
.app-layout {
  --sidebar-width: 280px;
  --sidebar-collapsed-width: 64px;

  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
  background-color: var(--color-background, #f5f5f5);
  /* layout places content to the right of the sidebar */
  padding-top: 0;
}

.app-layout__body {
  display: flex;
  flex: 1;
  overflow-x: visible; /* Allow horizontal expansion */
  overflow-y: hidden; /* Prevent vertical overflow on body */
}

.app-layout__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-x: visible; /* Allow horizontal expansion */
  overflow-y: auto; /* Keep vertical scrolling */
  /* When a fixed sidebar is present, offset the content by its width so
     the content sits to the right of the sidebar. Default (desktop)
     uses the full sidebar width; collapsed state is handled below. */
  margin-left: var(--sidebar-width, 280px);
  transition: margin-left 0.25s ease;
  /* Allow content to expand beyond viewport */
  width: auto;
  max-width: none;
}

/* When the layout root has the collapsed class, let the sidebar
   width collapse and the content will naturally fill the rest. */
.app-layout.sidebar-collapsed .sidebar {
  width: var(--sidebar-collapsed-width);
}

/* When the layout root has the collapsed class, shift the content left
   to match the collapsed sidebar width so the content expands correctly. */
.app-layout.sidebar-collapsed .app-layout__content {
  margin-left: var(--sidebar-collapsed-width, 64px);
}

/* If the content element itself is also given the collapsed class, honor it
   so the layout works regardless of whether the class is applied to the
   root or directly to the content element. */
.app-layout__content.sidebar-collapsed {
  margin-left: var(--sidebar-collapsed-width, 64px);
}

.app-layout__content.mobile {
  margin-left: 0; /* No sidebar margin on mobile */
}

/* Breadcrumbs */
.app-layout__breadcrumbs {
  padding: 1rem 1.5rem 0 0.5rem;
  background-color: var(--color-surface, #ffffff);
  border-bottom: 1px solid var(--color-border, #e0e0e0);
  width: 100%;
}

.breadcrumb-list {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.875rem;
}

.breadcrumb-item {
  display: flex;
  align-items: center;
}

.breadcrumb-link {
  display: flex;
  align-items: center;
  color: var(--color-text-secondary, #666);
  text-decoration: none;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.breadcrumb-link:hover {
  color: var(--color-primary, #007bff);
  background-color: var(--color-primary-light, rgba(0, 123, 255, 0.1));
}

.breadcrumb-current {
  display: flex;
  align-items: center;
  color: var(--color-text-primary, #333);
  font-weight: 500;
  padding: 0.25rem 0.5rem;
}

.breadcrumb-separator {
  margin: 0 0.5rem;
  color: var(--color-text-disabled, #999);
}

.breadcrumb-link .icon,
.breadcrumb-current .icon {
  margin-right: 0.5rem;
  font-size: 1rem;
}


.page-title {
  margin: 0;
  font-size: 1.75rem;
  font-weight: 600;
  color: var(--color-text-primary, #333);
}

.page-actions {
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

/* Page Content */
.app-layout__page-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: visible; /* Allow horizontal expansion for wide content */
  padding: 0.5rem 0.5rem 0.5rem 0;
  background-color: var(--color-background, #f5f5f5);
  /* Ensure horizontal scrolling works for wide content */
  min-width: 0; /* Allow flex item to shrink below content size */
  min-height: 0; /* Allow flex item to shrink below content size */
  /* Left-justify content right after sidebar */
  align-items: flex-start;
  /* Allow content to expand beyond viewport */
  width: 100%;
  max-width: none;
}

/* Loading State */
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: var(--color-text-secondary, #666);
}

.loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border, #e0e0e0);
  border-top: 3px solid var(--color-primary, #007bff);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Mobile Overlay */
.app-layout__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 998;
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* Responsive Design */
@media (max-width: 768px) {
  .app-layout__content {
    margin-left: 0;
  }

  .app-layout__content.sidebar-collapsed {
    margin-left: 0;
  }

  .page-title {
    font-size: 1.5rem;
  }

  .page-actions {
    width: 100%;
    justify-content: flex-end;
  }

  /* Add minimal padding for mobile touch targets while maintaining full width utilization */
  .app-layout__page-content {
    padding: 0.5rem 0.25rem 0.5rem 0.25rem;
  }

  .app-layout__breadcrumbs {
    padding: 0.75rem 0.25rem 0 0.25rem;
  }

  .breadcrumb-list {
    font-size: 0.8rem;
  }

  /* Ensure touch targets are at least 44px for accessibility */
  .breadcrumb-link,
  .breadcrumb-current {
    padding: 0.5rem 0.75rem;
    min-height: 44px;
    display: flex;
    align-items: center;
  }
}

@media (max-width: 480px) {
  .page-title {
    font-size: 1.25rem;
  }

  /* Maintain minimal padding for touch targets on very small screens */
  .app-layout__page-content {
    padding: 0.5rem 0.25rem 0.5rem 0.25rem;
  }

  .breadcrumb-list {
    flex-wrap: wrap;
    gap: 0.25rem;
  }

  .breadcrumb-separator {
    margin: 0 0.25rem;
  }

  /* Ensure breadcrumb touch targets remain accessible on small screens */
  .breadcrumb-link,
  .breadcrumb-current {
    padding: 0.5rem 0.5rem;
    min-height: 44px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .app-layout__breadcrumbs,

  .breadcrumb-link:hover {
    outline: 2px solid var(--color-primary, #007bff);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .app-layout__content,
  .loading-spinner,
  .breadcrumb-link {
    transition: none;
    animation: none;
  }
}